const fs=require("fs"),path=require("path"),sharp=require("sharp"),gamesData=JSON.parse(fs.readFileSync("games.json","utf8")),imagesDir=path.join(__dirname,"..","public","images");async function convertToWebP(inputPath,outputPath,size=512){try{return await sharp(inputPath).resize(size,size,{fit:"cover",position:"center"}).webp({quality:90}).toFile(outputPath),!0}catch(error){return console.error(`Error converting ${inputPath}:`,error.message),!1}}async function convertLogos(){console.log("Starting logo conversion to WebP 512x512...\n");const results={success:[],failed:[]},imageFiles=fs.readdirSync(imagesDir).filter((file=>!file.endsWith(".webp")&&!file.includes("-temp")&&/\.(png|jpg|jpeg|gif|webp)$/i.test(file)));console.log(`Found ${imageFiles.length} images to convert\n`);for(const file of imageFiles){const inputPath=path.join(imagesDir,file),baseName=path.parse(file).name,outputPath=path.join(imagesDir,`${baseName}.webp`);console.log(`ðŸ”„ Converting: ${file} â†’ ${baseName}.webp`);try{if(!await convertToWebP(inputPath,outputPath,512))throw new Error("Conversion failed");fs.unlinkSync(inputPath),console.log("   âœ… Success - deleted original"),results.success.push({file:file,converted:`${baseName}.webp`})}catch(error){console.error(`   âŒ Failed: ${error.message}`),results.failed.push({file:file,error:error.message})}}console.log("\n"+"=".repeat(60)),console.log("SUMMARY"),console.log("=".repeat(60)),console.log(`âœ… Success: ${results.success.length}`),console.log(`âŒ Failed: ${results.failed.length}`),console.log("=".repeat(60)),results.failed.length>0&&(console.log("\nFailed conversions:"),results.failed.forEach((item=>{console.log(`  - ${item.file}: ${item.error}`)}))),console.log("\nâœ… All logos converted to WebP 512x512!")}convertLogos().catch(console.error);